## Use this command to reload tmux config... no restart necessary
# tmux source-file ~/.tmux.conf

##### Basic sanity #####
set -g default-terminal "screen-256color"
set -g history-limit 10000

##### Mouse support (huge QoL) #####
set -g mouse on

##### Sensible timing #####
set -sg escape-time 10

##### Window & pane indexing (1-based, like humans) #####
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

##### Splits (intuitive) #####
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

##### Pane navigation (vim-like but minimal) #####
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

##### Resize panes with repeatable keys #####
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

##### Status bar (clean + readable + mode indicators) #####
set -g status-position bottom
set -g status-style "bg=colour235,fg=colour136"

# Optional: make mode indicators feel instant
set -g status-interval 1

# Show PREFIX when you've pressed Ctrl-b, and GIT when you're in git key table
set -g status-left "#[fg=colour39] #S #[fg=colour244]#{?client_prefix,#[bg=colour52]#[fg=colour231] PREFIX #[default] ,}#{?#{==:#{client_key_table},git},#[bg=colour58]#[fg=colour231] GIT #[default] ,}"

# Git branch + clock on the right (your Step 1)
set -g status-right "#[fg=colour245]#(git -C #{pane_current_path} rev-parse --abbrev-ref HEAD 2>/dev/null) #[fg=colour244]%Y-%m-%d %H:%M "

set -g window-status-current-style "fg=colour231,bg=colour31"
set -g window-status-style "fg=colour244,bg=default"

##### Donâ€™t rename windows automatically #####
set -g allow-rename off
setw -g automatic-rename off

##### Git branch in status bar #####
set -g status-right "#[fg=colour245]#(git -C #{pane_current_path} rev-parse --abbrev-ref HEAD 2>/dev/null) #[fg=colour244]%Y-%m-%d %H:%M "

##### Git mode (prefix -> g -> {s,b,l}) #####

# Press prefix+g to enter the "git" key table
bind-key -T prefix g display-message "GIT MODE: s=status b=branch l=log (q/esc to exit)" \; switch-client -T git

# Git commands (return to normal prefix table after running)
bind-key -T git s send-keys 'git status' C-m \; switch-client -T prefix
bind-key -T git b send-keys 'git branch' C-m \; switch-client -T prefix
bind-key -T git l send-keys 'git log --oneline --graph --decorate --all -10' C-m \; switch-client -T prefix

# Exit git mode without running anything
bind-key -T git Escape switch-client -T prefix
bind-key -T git q switch-client -T prefix

##### Copy mode (macOS clipboard-friendly) #####
setw -g mode-keys vi

# Use system clipboard
set -g set-clipboard on

# Start selection
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi Space send -X begin-selection

# Copy to macOS clipboard with y / Enter
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel "pbcopy"

# Optional: mouse drag copy on release
bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy"
